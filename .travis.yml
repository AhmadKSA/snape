sudo: required
language: python

before_install:
  - ./build_tools/travis/before_install.sh

env:
  global:
    - OMP_NUM_THREADS=4
    - OPENBLAS_NUM_THREADS=4
  matrix:
   - DISTRIB="conda" PYTHON_VERSION="3.6"
   - DISTRIB="conda" PYTHON_VERSION="3.7"

install:
  - ./build_tools/travis/install.sh

before_script:
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - sleep 5 # give xvfb some time to start by sleeping for 5 seconds

script: make test
after_success: ./build_tools/travis/after_success.sh
